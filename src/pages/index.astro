---
import { Image } from "@astrojs/image/components";

import Layout from "@/layouts/Layout.astro";
import ProjectCard from "@/components/ProjectCard.astro";
import SkillCard from "@/components/SkillCard.astro";

import heroImage from "@/assets/santa-hat.png";
import nompImage from "@/assets/nomp.png";
import mySiteImage from "@/assets/cool-example.jpg";
import onlyFoodsImage from "@/assets/onlyfoods.png";

import { technologies, nompStack, onlyFoodsStack, portfolioStack } from "@/lib";
---

<Layout title="Humphrey">
  <main class="px-6 py-4 relative w-full m-auto md:max-w-lg xl:max-w-5xl">
    <section
      class="card h-screen w-full flex flex-col gap-10 items-center justify-center"
      id="home"
    >
      <div class="flex flex-col items-end gap-2">
        <h1 class="text-red-400 font-bold text-6xl name-header">Humphrey</h1>
        <p class="font-semibold px-4">Web Developer</p>
      </div>

      <Image src={heroImage} alt="Santa hat" height={300} format="webp" />
    </section>

    <section id="about" class="card pb-10">
      <h2
        class="font-headline font-bold text-xl uppercase after:w-full after:h-[2px] after:bg-slate-400 after:block flex after:m-3"
      >
        About
      </h2>

      <div class="text-sm flex flex-col gap-2 font-medium xl:text-lg">
        <p>
          🎅 Hi, I'm <span class="inline-block title">Humphrey</span>. Welcome
          to my site! 🎅
        </p>
        <p>
          🎓 I'm a <span class="inline-block title after:w-full"
            >2nd year Computer Science major
          </span> @ the National University of Singapore! 🎓
        </p>

        <p>
          🌎 I enjoy building websites, as well as keeping up with new and
          exciting technologies and tools created by open-source communities as
          the web development space continues to evolve 💻
        </p>

        <p>
          🌎 Looking for opportunities to push and challenge myself and get
          better at my craft! 💻
        </p>

        <p>🐟 Lately, I've been doing some fishkeeping 🐠</p>

        <p>
          📺 What i'm currently watching: <span class="font-headline uppercase"
            >Succession 📺
          </span>
        </p>
      </div>
    </section>

    <section id="projects" class="card">
      <h2
        class="font-headline font-bold text-xl uppercase after:w-full after:h-[2px] after:bg-slate-400 after:block flex after:m-3"
      >
        Projects
      </h2>

      <div class="pb-10 card">
        <ProjectCard
          title="Nomp"
          technologies={nompStack}
          link="https://orbital-nomp.netlify.app/"
          github="https://github.com/bananamonkey4655/nomp"
        >
          <Image src={nompImage} alt="Nomp" slot="image" format="webp" />
          <h3
            class="text-red-500 font-semibold text-xs uppercase font-headline"
          >
            Built for CP2106 Independent Software Development Project (Orbital)
          </h3>

          <p>
            A single-page-application to help a group of friends decide where to
            eat using a Tinder-like interface to vote
          </p>

          <p>
            Users can create/join a group with their friends, then customize
            their preferences by providing a location to begin the search, and
            optionally: a type of cuisine, budget, and maximum distance from the
            given location
          </p>

          <p>
            After setting preferences, users will be shown a list of restaurants
            that they can cast votes for, and the restaurant with the most votes
            will be picked!
          </p>

          <p>Works on mobile too!</p>

          <p>
            Uses Socket.io for real-time communication between client and
            server.
          </p>

          <p>Auth implemented with JWTs & bcrypt.</p>

          <p>Restaurant data fetched from Yelp API.</p>
        </ProjectCard>
      </div>

      <div class="pb-10 card">
        <ProjectCard
          title="OnlyFoods"
          technologies={onlyFoodsStack}
          link="https://onlyfoods-blue.vercel.app/"
          github="https://github.com/bananamonkey4655/onlyfoods"
        >
          <Image src={onlyFoodsImage} alt="OnlyFoods" slot="image" format="webp"
          />

          <p>
            A Next.js web app to search for restaurant listings using keywords
          </p>

          <p>Shown restaurants can be sorted by price and/or ratings.</p>

          <p>
            Uses incremental static regeneration (ISR) to pre-render only a few
            listings as static sites at build time, while server-rendering
            listings on demand if they don't exist.
          </p>

          <p>
            Pages are then cached and served as static sites for future
            requests.
          </p>

          <p>Utilizes Zustand for client-side state management.</p>
        </ProjectCard>
      </div>

      <div class="pb-10 card">
        <ProjectCard
          title="My website"
          technologies={portfolioStack}
          link="/"
          github="https://github.com/bananamonkey4655/astro-test"
        >
          <Image src={mySiteImage} alt="My website" slot="image" format="webp"
          />

          <p>This website!</p>

          <p>Quick to load and ships with minimal JavaScript bundled!</p>
        </ProjectCard>
      </div>
    </section>

    <section class="card" id="skills">
      <h2
        class="flex font-headline font-bold text-xl uppercase after:w-full after:h-[2px] after:bg-slate-400 after:block after:m-3"
      >
        Skills
      </h2>

      <SkillCard
        title="Languages"
        technologies={technologies.filter((tech) => tech.skill === "language")}
      />

      <SkillCard
        title="Libraries & Frameworks"
        technologies={technologies.filter((tech) => tech.skill === "library")}
      />

      <SkillCard
        title="Tools"
        technologies={technologies.filter((tech) => tech.skill === "tool")}
      />
    </section>

    <section id="contact" class="card py-40 flex flex-col gap-4">
      <h2
        class="font-headline font-bold text-xl uppercase after:w-full after:h-[2px] after:bg-slate-400 after:block flex after:m-3"
      >
        Contact
      </h2>

      <p class="text-center font-semibold">
        Whether you'd like to chat or talk about opportunities, <span
          class="inline-block title"
          >feel free to drop me a message!
        </span>
      </p>

      <a
        href="mailto: humphrey@u.nus.edu"
        class="self-center bg-red-100 rounded-md p-2 shadow-xl text-lg font-semibold border-[2px] border-red-300 hover:bg-red-50 transition-all duration-150 ease-in-out"
        >📧 Get in touch! 📧
      </a>
    </section>
  </main>
</Layout>

<script>
  const cards = document.querySelectorAll(".card");

  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        entry.target.classList.toggle("show", entry.isIntersecting);

        if (entry.isIntersecting) {
          observer.unobserve(entry.target);
        }
      });
    },
    { threshold: 0.1 }
  );

  cards.forEach((card) => {
    observer.observe(card);
  });
</script>

<style>
  section {
    padding-top: 70px;
    padding-bottom: 70px;
    margin-top: -70px;
  }

  .card {
    transform: translateY(100px);
    transition: 250ms;
    opacity: 0;
  }

  .card.show {
    transform: translateY(0);
    opacity: 1;
  }
</style>
